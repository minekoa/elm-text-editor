<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <style>html,head,body { padding:0; margin:0; height:100%; } body { font-family: calibri, helvetica, arial, sans-serif;}</style>
  <link rel="stylesheet" type="text/css" href="main.css" >
  <link rel="stylesheet" type="text/css" href="menu.css" >
  <link rel="stylesheet" type="text/css" href="debugmenu.css">
  <link rel="stylesheet" type="text/css" href="softwarekeyboard.css">
  <link rel="stylesheet" type="text/css" href="stylemenu.css">
  <link rel="stylesheet" type="text/css" href="filemenu.css">
</head>
<body>
</body>
<script type="text/javascript" src="./main.js"></script>
<script type="text/javascript">
  const app =  Elm.Main.fullscreen();


  app.ports.filer_saveFile.subscribe( ([fname, content]) => {
    const URL = window.URL || window.webkitURL;
    const blob = new Blob( [content], {"type" : "text/plain"} );

    const a = document.createElement("a");
    a.href     = URL.createObjectURL(blob);
    a.download = fname;

    a.click();
    URL.revokeObjectURL( a.href );
  });

  app.ports.localStrage_setItem.subscribe( ([key, value]) => {
      const strage = window.localStorage;
      try {
          strage.setItem( key, value );
          app.ports.localStrage_setItemEnded.send( [key, true]);
      }
      catch (e) {
          app.ports.localStrage_setItemEnded.send( [key, false] );
      }
  });

  app.ports.localStrage_getItem.subscribe( (key) => {
      const strage = window.localStorage;
      try {
          const val = strage.getItem( key );
          app.ports.localStrage_getItemEnded.send( [key, val] );
      }
      catch (e) {
          app.ports.localStrage_getItemEnded.send( [key, null] );
      }
  });

  app.ports.localStrage_removeItem.subscribe( ([key, value]) => {
      const strage = window.localStorage;
      try {
          strage.removeItem( key );
          app.ports.localStrage_removeItemEnded.send( [key, true] );
      }
      catch (e) {
          app.ports.localStrage_removeItemEnded.send( [key, false] );
      }
  });

  app.ports.localStrage_clear.subscribe( (x) => {
      const strage = window.localStorage;
      strage.clear();
  });


</script>
</html>
